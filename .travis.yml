addons:
  apt:
    packages:
    - libgmp-dev

language: generic

cache:
  directories:
  - $HOME/.local/bin
  - $HOME/.stack

sudo: required

os:
- linux
- osx

before_install:
- bash auto/shellcheck
- bash tools/install-stack.sh
- bash tools/install-ghr.sh

script:
- stack setup
- stack test --ghc-options -O2 --pedantic
- stack build --ghc-options -O2 --pedantic
- bash tools/attach-binary.sh
